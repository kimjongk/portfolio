<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/ScrollTrigger.min.js"></script>


</head>
<body>
    

     <canvas id="canvas" class="canvas"></canvas>


     <script>
        // 이미지 시퀀스


    const canvas = document.querySelector('#canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = 1694;
    canvas.height = 952;

    const frameCount = 60;

    const currentFrame = (idx) => {
        // return `https://www.apple.com/105/media/us/airpods-max/2020/996b980b-3131-44f1-af6c-fe72f9b3bfb5/anim/turn/large/large_${idx.toString().padStart(4, '0')}.jpg`;
        return `https://clingr.me/assets/images/media/landing/2.description/sequence/color/Seq01_color__${idx.toString().padStart(3, '0')}@xxl.webp`
    }; 
/*
idxJavaScript 코드 조각을 사용하여 숫자 인덱스( )를 최소 길이가
 4자인 문자열로 변환하고 필요한 경우 0으로 채우는 것 같습니다 
 . 귀하의 코드가 정확합니다.

작동 방식은 다음과 같습니다.

 idx.toString()숫자 인덱스를 문자열로 변환합니다.
 padStart(4, '0')문자열의 시작(왼쪽)부터 0으로 채워 최소 길이가 4자인지 확인합니다.
예를 들어, idx7인 경우 최소 길이인 4자를 충족하기 위해 3개의 0이 채워졌기 때문에 결과는 "0007" 문자열이 됩니다.
*/

    const images = [];
    const card = {
        frame: 4,
    };


    //사전에 리소스를 로드한다

    for (let i = 0; i < frameCount; i++) {
        const img = new Image();
        img.src = currentFrame(i + 1);
        images.push(img);
    }

    gsap.to(card, {
        scrollTrigger: {
            trigger: '.canvas-area',
            scrub: 1,
            start: 'top top',
            end: 'bottom center',
        },
        frame: frameCount - 1,
        snap: 'frame',
        ease: 'none',
        onUpdate: render,
    });

    images[0].onload = render;

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(images[card.frame], 0, 0);
    }

     </script>
</body>
</html>